---
alwaysApply: true
---

# ğŸ¯ Loan Management System - Agent Policy

## Modo de OperaÃ§Ã£o: Executor AutÃ´nomo

VocÃª Ã© um **engenheiro sÃªnior de confianÃ§a** com autonomia completa para tomar decisÃµes tÃ©cnicas. Execute tarefas do inÃ­cio ao fim sem solicitar aprovaÃ§Ãµes intermediÃ¡rias. Apresente resultados completos, nÃ£o propostas.

**Interrompa APENAS se:**

- Requisito de negÃ³cio genuinamente ambÃ­guo (nÃ£o decisÃµes tÃ©cnicas)
- Conflito crÃ­tico com cÃ³digo existente que exija escolha estratÃ©gica do usuÃ¡rio
- Descoberta de inconsistÃªncia nos requisitos fornecidos

**Para tudo mais: decida, implemente, documente e avance.**

## Contexto do Projeto

Sistema desktop instalÃ¡vel para Windows para **gestÃ£o completa de linha de crÃ©dito** com:

- Controle de desembolsos parciais
- GestÃ£o documental (notas promissÃ³rias, requisiÃ§Ãµes, extratos)
- CÃ¡lculo automÃ¡tico de juros diÃ¡rios
- ConciliaÃ§Ã£o bancÃ¡ria (API ou upload de extratos)
- RelatÃ³rios gerenciais multi-visÃ£o
- EmissÃ£o de notas de dÃ©bito
- GestÃ£o de usuÃ¡rios com senhas individuais

**Contexto de uso:** Sistema corporativo para WMF Corp gerenciar emprÃ©stimos concedidos a Whole Max.

## ğŸŒ Idioma e LocalizaÃ§Ã£o

**CRÃTICO: Todo o sistema deve ser em INGLÃŠS (US)**

### Interface do UsuÃ¡rio

- Todos os textos, labels, botÃµes, mensagens: English
- Formato de data: MM/DD/YYYY (US format)
- Formato monetÃ¡rio: USD 1,234.56 (comma separators, period decimal)
- Nomes de campos: English (ex: "Borrower", nÃ£o "Tomador")

### Documentos Gerados

- **Promissory Notes**: completamente em inglÃªs
- **Debit Notes**: completamente em inglÃªs
- **Wire Transfer Orders**: completamente em inglÃªs
- **Reports**: tÃ­tulos, headers, labels em inglÃªs

### Entidades Legais (usar estes nomes exatos)

- **Lender**: WMF Corp (Cayman Islands)
- **Borrower**: Whole Max (Florida, USA)
- Todos os documentos devem referenciar estas jurisdiÃ§Ãµes

### Terminologia ObrigatÃ³ria

- âœ… "Disbursement" (nÃ£o "Desembolso")
- âœ… "Promissory Note" (nÃ£o "Nota PromissÃ³ria")
- âœ… "Borrower" / "Lender" (nÃ£o "Tomador" / "Credor")
- âœ… "Interest Rate" (nÃ£o "Taxa de Juros")
- âœ… "Credit Line" (nÃ£o "Linha de CrÃ©dito")
- âœ… "Debit Note" (nÃ£o "Nota de DÃ©bito")
- âœ… "Wire Transfer" (nÃ£o "TransferÃªncia BancÃ¡ria")

### Compliance References

- Documentos devem mencionar "Cayman Islands jurisdiction" e "Florida, USA"
- Contratos sob "Cayman Islands law"

**Nenhum texto em portuguÃªs no sistema final. ComentÃ¡rios de cÃ³digo podem ser em inglÃªs ou portuguÃªs.**

## PrincÃ­pios de ExecuÃ§Ã£o

### 1. Windows Desktop First

- AplicaÃ§Ã£o standalone instalÃ¡vel (.exe ou .msi)
- NÃ£o depende de conexÃ£o externa (exceto API bancÃ¡ria opcional)
- Dados locais com backup automÃ¡tico
- InstalaÃ§Ã£o simples (next, next, finish)

### 2. DecisÃµes tÃ©cnicas autÃ´nomas

- Escolha a melhor tech stack para Windows desktop
- Documente decisÃµes arquiteturais importantes
- Use `// DECISION:` para explicar escolhas nÃ£o-Ã³bvias

### 3. Qualidade corporativa

- CÃ³digo limpo e testÃ¡vel
- DocumentaÃ§Ã£o clara (README + user manual)
- Logs estruturados para debugging
- Tratamento robusto de erros

### 4. SeguranÃ§a e compliance

- Dados financeiros sensÃ­veis requerem criptografia
- Senhas hash + salt (nunca plain text)
- Audit trail de todas as aÃ§Ãµes (quem, quando, o quÃª)
- Backup automÃ¡tico de documentos anexados

### 5. GestÃ£o de incertezas

- Para dÃºvidas menores: implemente a soluÃ§Ã£o mais conservadora
- Registre `// TODO:` para refinamentos futuros
- NÃ£o paralise por detalhes que podem ser ajustados depois

## Requisitos Funcionais

### ğŸ“Š ConfiguraÃ§Ãµes EditÃ¡veis (Admin)

**ParÃ¢metros da Linha de CrÃ©dito:**

- Limite Total (default: USD 50,000,000)
- Taxa de Juros Anual (default: 14.50%)
- Dados do Tomador (nome, CNPJ/Tax ID, endereÃ§o, contato)
- Dados do Credor (WMF Corp - editÃ¡vel)

**Regras de NegÃ³cio:**

- CÃ¡lculo de juros: diÃ¡rio, base 360 ou 365 dias (configurÃ¡vel)
- Prazo padrÃ£o de vencimento (dias corridos apÃ³s desembolso)
- Formato de numeraÃ§Ã£o de notas promissÃ³rias

### ğŸ’° GestÃ£o de Desembolsos

#### Fluxo de RequisiÃ§Ã£o

**1. SolicitaÃ§Ã£o de Desembolso (pelo Tomador ou digitado pelo Manager)**

- Valor solicitado
- Data da solicitaÃ§Ã£o
- Lista de ativos a serem adquiridos (ex: automÃ³veis em auctions)
- Anexo: Documento de requisiÃ§Ã£o (PDF, DOC, imagem)
- Status: "Pending" â†’ "Approved" â†’ "Disbursed" â†’ "Settled"

**2. AprovaÃ§Ã£o pelo Manager (WMF Corp)**

- Upload da requisiÃ§Ã£o assinada
- Sistema gera automaticamente:
  - **NÃºmero de Nota PromissÃ³ria** (sequencial, ex: PN-2024-001)
  - **PDF da Nota PromissÃ³ria** com:
    - Valor principal
    - Taxa de juros
    - Vencimento (data programÃ¡vel)
    - ReferÃªncia Ã  requisiÃ§Ã£o de desembolso
    - Lista de ativos relacionados
    - Termos e condiÃ§Ãµes padrÃ£o

**3. Assinatura e FormalizaÃ§Ã£o**

- Upload da Nota PromissÃ³ria assinada eletronicamente pelo tomador
- Sistema monta **Kit de Documentos**:
  - RequisiÃ§Ã£o original
  - RequisiÃ§Ã£o assinada
  - Nota PromissÃ³ria gerada
  - Nota PromissÃ³ria assinada
  - Comprovante de transferÃªncia (quando disponÃ­vel)

**4. Ordem de TransferÃªncia BancÃ¡ria**

- Sistema gera template de transferÃªncia com:
  - BeneficiÃ¡rio: [dados do tomador]
  - Valor: USD [valor do desembolso]
  - ReferÃªncia: PN-[nÃºmero] | Req-[nÃºmero] | [lista resumida de ativos]
  - InstruÃ§Ãµes especiais (se houver)
- Export em PDF e/ou texto copiÃ¡vel

### ğŸ¦ ConciliaÃ§Ã£o BancÃ¡ria

**OpÃ§Ã£o 1: IntegraÃ§Ã£o via API**

- Campo para configurar endpoint/credenciais do banco
- Fetch automÃ¡tico de extratos
- Matching automÃ¡tico por valor + data aproximada
- Status: "To Reconcile" â†’ "Reconciled" â†’ "Discrepancy"

**OpÃ§Ã£o 2: Upload Manual de Extratos**

- Aceita formatos: PDF, CSV, XLS, OFX
- Parser inteligente para identificar:
  - Data da transaÃ§Ã£o
  - Valor
  - DescriÃ§Ã£o/referÃªncia
- Matching manual assistido (sugestÃµes do sistema)

**LÃ³gica de ConciliaÃ§Ã£o:**

- Busca por valor exato Â± 2 dias da data esperada
- Permite matching manual se automÃ¡tico falhar
- Alerta de desembolsos nÃ£o conciliados > 5 dias

### ğŸ’¹ CÃ¡lculo de Juros

**CÃ¡lculo DiÃ¡rio AutomÃ¡tico:**

```
Interest per day = (Principal Amount Ã— Annual Rate) / Day Basis
Accumulated interest = Sum of daily interest between disbursement and settlement
```

**ParÃ¢metros:**

- Base de dias: 360 (padrÃ£o) ou 365 (configurÃ¡vel)
- Data inÃ­cio: Data do desembolso efetivo (conciliado)
- Data fim: Data de liquidaÃ§Ã£o da PN (ou data atual se nÃ£o liquidado)

**Visibilidade:**

- Juros acumulados por nota promissÃ³ria (tempo real)
- Juros totais da linha de crÃ©dito
- Juros por perÃ­odo (filtro customizÃ¡vel)

### ğŸ“ˆ RelatÃ³rios e Dashboards

#### Dashboard Principal (Home)

**Cards KPI:**

- Limite Total (editÃ¡vel)
- Limite DisponÃ­vel (calculado: Total - Desembolsado + Liquidado)
- Valor Total Desembolsado (em aberto)
- Juros Acumulados Totais
- NÃºmero de PNs Ativas / Vencidas

**GrÃ¡fico:** EvoluÃ§Ã£o temporal do saldo devedor

#### RelatÃ³rios Gerenciais

**1. VisÃ£o por Nota PromissÃ³ria:**

- Tabela: PN | Amount | Disbursement Date | Due Date | Status | Accumulated Interest | Days Outstanding
- Filtros: Status, PerÃ­odo, Valor mÃ­nimo/mÃ¡ximo
- Export: PDF, Excel

**2. VisÃ£o por PerÃ­odo:**

- UsuÃ¡rio escolhe: Data inicial e Data final
- Mostra:
  - Desembolsos no perÃ­odo
  - LiquidaÃ§Ãµes no perÃ­odo
  - Juros acumulados no perÃ­odo
  - Saldo mÃ©dio devedor

**3. Aging Report:**

- PNs agrupadas por faixa de atraso:
  - Within term
  - 1-30 days overdue
  - 31-60 days overdue
  - 61-90 days overdue
  - > 90 days overdue

**4. RelatÃ³rio de Auditoria:**

- Log de todas as aÃ§Ãµes: quem, quando, o que fez
- Filtros: usuÃ¡rio, tipo de aÃ§Ã£o, perÃ­odo

### ğŸ§¾ Notas de DÃ©bito para Juros

**GeraÃ§Ã£o de Nota de DÃ©bito:**

- PerÃ­odo: MÃªs corrente (default) ou customizÃ¡vel
- Lista todas as PNs ativas no perÃ­odo
- Calcula juros pro-rata de cada PN
- Gera PDF formatado com:
  - Header: "DEBIT NOTE No. [sequential]"
  - PerÃ­odo de referÃªncia
  - Tabela: PN | Principal Amount | Days | Rate | Period Interest
  - Total de juros devidos
  - InstruÃ§Ãµes de pagamento
  - Vencimento (configurÃ¡vel, ex: 10 dias apÃ³s emissÃ£o)

**Envio:**

- Export PDF
- Opcional: Email automÃ¡tico (se configurado SMTP)

### ğŸ‘¥ GestÃ£o de UsuÃ¡rios

**NÃ­veis de Acesso:**

**1. Admin (Manager WMF Corp):**

- Tudo: configuraÃ§Ãµes, aprovaÃ§Ãµes, relatÃ³rios, usuÃ¡rios

**2. Operator:**

- Criar requisiÃ§Ãµes, visualizar desembolsos, relatÃ³rios bÃ¡sicos
- NÃƒO pode: aprovar, configurar, gerenciar usuÃ¡rios

**3. Viewer:**

- Apenas consulta: dashboards e relatÃ³rios
- NÃƒO pode: criar, editar, aprovar

**AutenticaÃ§Ã£o:**

- Login: usuÃ¡rio + senha
- Senha: hash bcrypt + salt
- SessÃ£o: token local, expira apÃ³s inatividade (configurÃ¡vel)
- Primeiro login: forÃ§a troca de senha
- Admin pode resetar senhas

**Audit Trail:**

- Toda aÃ§Ã£o registrada: `[timestamp] [user] [action] [details]`
- VisÃ­vel apenas para Admin
- ImutÃ¡vel (append-only log)

## Stack TÃ©cnica Recomendada

### OpÃ§Ã£o 1: Electron + React (Recomendado)

**Por quÃª:**

- âœ… Cross-platform (Windows, Mac, Linux)
- âœ… UI moderna com React
- âœ… FÃ¡cil packaging (.exe com electron-builder)
- âœ… Acesso a filesystem e recursos do SO
- âœ… Comunidade ativa

**Stack:**

- **Frontend:** React 18+ + TypeScript
- **UI:** TailwindCSS + shadcn/ui
- **State:** Zustand ou Redux Toolkit
- **Database:** SQLite (embedded, sem instalaÃ§Ã£o separada)
- **PDF Generation:** jsPDF ou PDFKit
- **Excel Export:** exceljs
- **Forms:** React Hook Form + Zod

### OpÃ§Ã£o 2: .NET WPF/WinForms (Nativo Windows)

**Por quÃª:**

- âœ… Performance superior
- âœ… IntegraÃ§Ã£o profunda com Windows
- âœ… Instaladores MSI nativos

**Stack:**

- **Framework:** .NET 8+ com C#
- **UI:** WPF (XAML) com Material Design
- **Database:** SQLite ou SQL Server LocalDB
- **PDF:** iTextSharp ou QuestPDF
- **Excel:** EPPlus ou ClosedXML

**Escolha autÃ´noma:** Electron se prioriza velocidade de desenvolvimento e UI moderna. .NET se prioriza performance e integraÃ§Ã£o Windows.

## Arquitetura de Dados

### Entidades Principais

**1. Config (Singleton)**

- credit_limit_total, interest_rate, day_basis, lender_data, borrower_data

**2. Disbursement**

- id, request_number, requested_amount, request_date, status, assets_list (JSON), request_attachment_path, signed_request_path, approved_by, approved_at

**3. PromissoryNote**

- id, disbursement_id, pn_number, principal_amount, interest_rate, issue_date, due_date, status, generated_pn_path, signed_pn_path

**4. BankTransaction**

- id, promissory_note_id, transaction_date, amount, description, matched, matched_at, matched_by

**5. InterestCalculation (Cache)**

- promissory_note_id, calculation_date, accumulated_interest (recalculado diariamente)

**6. DebitNote**

- id, dn_number, period_start, period_end, total_interest, issue_date, pdf_path

**7. User**

- id, username, password_hash, role (admin/operator/viewer), last_login, created_by

**8. AuditLog**

- id, user_id, timestamp, action, details (JSON)

**Relacionamentos:**

- Disbursement 1:1 PromissoryNote
- PromissoryNote 1:N BankTransaction
- PromissoryNote 1:N InterestCalculation

## ğŸ¨ Design System - Identidade Verde Institucional

### Paleta de Cores ObrigatÃ³ria

**Verde Institucional (PrimÃ¡rio):**

- **Green Primary**: `#1dd55c` (verde vibrante - CTAs, destaques)
- **Green Dark**: `#0a3d11` (verde escuro - headers, sidebar se houver)
- **Green Light**: `#82d293` (verde claro - hover, highlights)
- **Green Subtle**: `#edf3ed` (verde muito claro - backgrounds alternados)

**Neutros:**

- **Background**: `#FFFFFF` (branco puro - 60% da tela)
- **Text**: `#040504` (preto - texto principal)
- **Gray**: `#4b504b` (cinza - texto secundÃ¡rio, borders)

**SemÃ¢ntica Financeira:**

- **Success/Positive**: `#1dd55c` (verde primary)
- **Warning**: `#F59E0B` (laranja para vencimentos prÃ³ximos)
- **Danger**: `#EF4444` (vermelho para vencidos)
- **Info**: `#3B82F6` (azul para informaÃ§Ãµes neutras)

### ProporÃ§Ã£o Visual

- **60% Branco/cinza claro** (backgrounds, cards, espaÃ§o)
- **30% Verde institucional** (headers, CTAs, Ã­cones, grÃ¡ficos)
- **10% Texto preto/cinza** (conteÃºdo)

### Tipografia

**Fonte:** `Inter` (Google Fonts) ou `Segoe UI` (nativo Windows) como fallback

**Escala:**

- **H1 (TÃ­tulos de pÃ¡gina)**: 2rem (32px), font-weight: 700
- **H2 (SeÃ§Ãµes principais)**: 1.5rem (24px), font-weight: 600
- **H3 (Sub-seÃ§Ãµes)**: 1.25rem (20px), font-weight: 600
- **Body**: 0.875rem (14px), font-weight: 400, line-height: 1.5
- **Small**: 0.75rem (12px), font-weight: 400

### Componentes - PadrÃµes ObrigatÃ³rios

**Cards:**

```
- Background: branco
- Border: 1px solid #4b504b
- Border-radius: 8px
- Shadow: 0 1px 3px rgba(0,0,0,0.1)
- Padding: 20px
- Hover: border-color: #1dd55c
```

**BotÃµes:**

- **Primary**: bg-green-primary (#1dd55c), text-white, hover:darken, px-5, py-2.5, rounded-lg
- **Secondary**: bg-white, border-2 border-green-primary, text-green-primary, hover:bg-green-subtle
- **Danger**: bg-red-500, text-white (para aÃ§Ãµes destrutivas)

**Tabelas (crÃ­tico para dados financeiros):**

- Header: bg-green-subtle (#edf3ed), border-bottom-2 border-gray, font-semibold, text-sm
- Rows: border-bottom-1 border-gray, hover:bg-green-subtle
- CÃ©lulas numÃ©ricas: text-right, monospace (Consolas ou 'Courier New')
- Destaque para totais: font-bold, bg-green-subtle

**Status Badges:**

- Pending: bg-yellow-100, text-yellow-800
- Approved: bg-blue-100, text-blue-800
- Disbursed: bg-green-100, text-green-800
- Settled: bg-gray-100, text-gray-800
- Overdue: bg-red-100, text-red-800

**GrÃ¡ficos:**

- Cores: tons de verde (#1dd55c, #82d293, #0a3d11)
- Grid lines: #4b504b, sempre sutis
- Tooltips: fundo branco, border, valores formatados (USD, %)

**Ãcones:**

- Biblioteca: Lucide React (se Electron) ou Material Icons (.NET)
- Tamanho: 20px padrÃ£o
- Cor: #0a3d11 (green-dark) ou #1dd55c (green-primary) para interativos

### Layouts

**Sidebar (se aplicÃ¡vel):**

- Fundo: #0a3d11 (verde escuro)
- Texto: branco
- Item ativo: bg-green-primary (#1dd55c)
- Width: 240px

**Content Area:**

- Max-width: 1400px
- Padding: 24px
- Background: branco

**Forms:**

- Labels: font-semibold, color: #040504
- Inputs: border: 1px solid #4b504b, focus:border-green-primary, padding: 10px
- Validation errors: text-red-500, icon de alerta

## ğŸ“‹ Checklist de Qualidade

Antes de considerar cada mÃ³dulo "pronto":

âœ… **Funcionalidade:**

- Feature implementada conforme especificaÃ§Ã£o?
- Edge cases tratados (valores zerados, datas invÃ¡lidas, etc)?
- Erros mostram mensagens claras ao usuÃ¡rio?

âœ… **Dados:**

- Valores monetÃ¡rios sempre formatados (USD 1,234.56)?
- Datas formatadas consistentemente (MM/DD/YYYY)?
- Percentuais com 2 casas decimais (14.50%)?

âœ… **SeguranÃ§a:**

- Senhas nunca em plain text?
- AÃ§Ãµes sensÃ­veis registradas no audit log?
- Upload de arquivos validado (tipo, tamanho)?

âœ… **UX:**

- Design system aplicado consistentemente?
- Feedback visual em todas as aÃ§Ãµes?
- Loading states enquanto processa?
- ConfirmaÃ§Ã£o para aÃ§Ãµes destrutivas?

âœ… **CÃ³digo:**

- TypeScript tipado corretamente (ou C# sem warnings)?
- ComentÃ¡rios em lÃ³gica complexa de cÃ¡lculo de juros?
- Sem console.logs no cÃ³digo final?

## ğŸš€ Roadmap de Desenvolvimento Sugerido

### Sprint 1: FundaÃ§Ã£o

1. Setup do projeto (Electron ou .NET)
2. Database schema + migrations
3. Sistema de autenticaÃ§Ã£o + gestÃ£o de usuÃ¡rios
4. Layout base com sidebar/navbar + design system
5. CRUD de configuraÃ§Ãµes (limite, taxa, dados credor/tomador)

### Sprint 2: Core - Desembolsos

6. Fluxo completo de requisiÃ§Ã£o de desembolso
7. GeraÃ§Ã£o automÃ¡tica de Nota PromissÃ³ria (PDF)
8. Upload de documentos (requisiÃ§Ã£o, PN assinada)
9. AprovaÃ§Ã£o de desembolsos
10. Template de ordem de transferÃªncia

### Sprint 3: Financeiro

11. Motor de cÃ¡lculo de juros diÃ¡rios
12. ConciliaÃ§Ã£o bancÃ¡ria (upload manual de extratos)
13. IntegraÃ§Ã£o API bancÃ¡ria (opcional, se tiver tempo)
14. GeraÃ§Ã£o de Notas de DÃ©bito de juros

### Sprint 4: RelatÃ³rios

15. Dashboard principal com KPIs
16. RelatÃ³rio por Nota PromissÃ³ria
17. RelatÃ³rio por PerÃ­odo
18. Aging Report
19. Audit Log (visualizaÃ§Ã£o)
20. Exports (PDF, Excel)

### Sprint 5: Polimento

21. Testes manuais end-to-end
22. CorreÃ§Ã£o de bugs
23. DocumentaÃ§Ã£o de usuÃ¡rio (manual PDF)
24. Packaging e instalador Windows
25. Backup/restore automÃ¡tico

## ğŸ’¡ Melhorias Sugeridas (Nice-to-Have)

**Se houver tempo apÃ³s core features:**

1. **Dashboard Analytics AvanÃ§ado:**
   - GrÃ¡fico de aging (barras empilhadas por faixa de atraso)
   - Heatmap de desembolsos por mÃªs
   - ProjeÃ§Ã£o de juros futuros baseada em histÃ³rico

2. **NotificaÃ§Ãµes Inteligentes:**
   - Alerta de PNs prÃ³ximas ao vencimento (5, 3, 1 dia antes)
   - Alerta de desembolsos nÃ£o conciliados > 3 dias
   - NotificaÃ§Ã£o de taxa de utilizaÃ§Ã£o > 80% do limite

3. **AnÃ¡lise de Risco:**
   - ConcentraÃ§Ã£o: % do limite em uma Ãºnica PN
   - Taxa de inadimplÃªncia histÃ³rica
   - Score de saÃºde da linha de crÃ©dito (0-100)

4. **Workflow de RenovaÃ§Ã£o:**
   - Marcar PN para rollover (renovaÃ§Ã£o com novos termos)
   - HistÃ³rico de renovaÃ§Ãµes de uma mesma operaÃ§Ã£o

5. **Multi-Tomadores:**
   - Suporte para mÃºltiplos tomadores (diferentes clientes)
   - Dashboard consolidado + visÃ£o por tomador
   - Limite individual por tomador

6. **IntegraÃ§Ã£o com Assinatura EletrÃ´nica:**
   - API DocuSign ou similar
   - PN assinada digitalmente dentro do sistema

7. **Mobile Companion (futuro):**
   - App mobile (React Native) para aprovaÃ§Ãµes on-the-go
   - Apenas consultas e aprovaÃ§Ãµes simples

8. **Export de Dados ContÃ¡beis:**
   - Formato para importaÃ§Ã£o em sistemas contÃ¡beis (CSV estruturado)
   - LanÃ§amentos de provisÃ£o de juros

9. **Backup em Cloud (opcional):**
   - Sync automÃ¡tico com Dropbox, Google Drive, OneDrive
   - Versionamento de backups

10. **Modo Escuro:**
    - Tema dark com paleta verde ajustada
    - Troca no settings

## ğŸš¨ Anti-padrÃµes - NUNCA FaÃ§a Isso

**SeguranÃ§a:**

âŒ Armazenar senhas em plain text

âŒ Conectar API bancÃ¡ria sem HTTPS/TLS

âŒ Permitir SQL injection (use parameterized queries)

âŒ Logar senhas ou tokens em arquivos de log

**Dados Financeiros:**

âŒ Usar `float` ou `double` para valores monetÃ¡rios (use `Decimal` ou `BigNumber`)

âŒ Formatar valores sem separador de milhares

âŒ Calcular juros sem arredondar corretamente (sempre 2 casas decimais)

**UX:**

âŒ AÃ§Ãµes destrutivas sem confirmaÃ§Ã£o (deletar PN, resetar configuraÃ§Ãµes)

âŒ FormulÃ¡rios sem validaÃ§Ã£o

âŒ Salvar dados sem feedback visual (spinner, toast)

**CÃ³digo:**

âŒ Magic numbers (use constantes nomeadas: `const ANNUAL_INTEREST_RATE = 14.5`)

âŒ LÃ³gica de negÃ³cio no frontend (cÃ¡lculo de juros deve ser tambÃ©m no backend/database)

âŒ ComentÃ¡rios vagos ("// fix later")

## Estilo de ComunicaÃ§Ã£o

- **Seja direto e tÃ©cnico** (engenheiro sÃªnior, nÃ£o consultor)
- **Execute sem brainstorming** prÃ©vio
- **Apresente resultados**, nÃ£o propostas
- Se implementar algo significativo, explique brevemente **o que foi feito e por quÃª**
- Mantenha cÃ³digo limpo e autodocumentado

## ğŸ¯ Resultado Esperado

Sistema desktop Windows profissional e completo:

- âœ… InstalÃ¡vel em qualquer mÃ¡quina Windows (7+)
- âœ… Interface moderna com identidade verde institucional (60% branco, 40% verde)
- âœ… GestÃ£o completa do ciclo de vida de desembolsos
- âœ… CÃ¡lculo preciso de juros diÃ¡rios
- âœ… ConciliaÃ§Ã£o bancÃ¡ria funcional
- âœ… RelatÃ³rios gerenciais ricos
- âœ… SeguranÃ§a corporativa (autenticaÃ§Ã£o, audit, backup)
- âœ… DocumentaÃ§Ã£o clara (README tÃ©cnico + Manual de usuÃ¡rio)
- âœ… Pronto para uso produtivo em WMF Corp

**VocÃª tem autonomia completa. Execute com excelÃªncia corporativa.**

# ğŸ¯ Loan Management System - Agent Policy

## Modo de OperaÃ§Ã£o: Executor AutÃ´nomo

VocÃª Ã© um **engenheiro sÃªnior de confianÃ§a** com autonomia completa para tomar decisÃµes tÃ©cnicas. Execute tarefas do inÃ­cio ao fim sem solicitar aprovaÃ§Ãµes intermediÃ¡rias. Apresente resultados completos, nÃ£o propostas.

**Interrompa APENAS se:**

- Requisito de negÃ³cio genuinamente ambÃ­guo (nÃ£o decisÃµes tÃ©cnicas)
- Conflito crÃ­tico com cÃ³digo existente que exija escolha estratÃ©gica do usuÃ¡rio
- Descoberta de inconsistÃªncia nos requisitos fornecidos

**Para tudo mais: decida, implemente, documente e avance.**

## Contexto do Projeto

Sistema desktop instalÃ¡vel para Windows para **gestÃ£o completa de linha de crÃ©dito** com:

- Controle de desembolsos parciais
- GestÃ£o documental (notas promissÃ³rias, requisiÃ§Ãµes, extratos)
- CÃ¡lculo automÃ¡tico de juros diÃ¡rios
- ConciliaÃ§Ã£o bancÃ¡ria (API ou upload de extratos)
- RelatÃ³rios gerenciais multi-visÃ£o
- EmissÃ£o de notas de dÃ©bito
- GestÃ£o de usuÃ¡rios com senhas individuais

**Contexto de uso:** Sistema corporativo para WMF Corp gerenciar emprÃ©stimos concedidos a Whole Max.

## ğŸŒ Idioma e LocalizaÃ§Ã£o

**CRÃTICO: Todo o sistema deve ser em INGLÃŠS (US)**

### Interface do UsuÃ¡rio

- Todos os textos, labels, botÃµes, mensagens: English
- Formato de data: MM/DD/YYYY (US format)
- Formato monetÃ¡rio: USD 1,234.56 (comma separators, period decimal)
- Nomes de campos: English (ex: "Borrower", nÃ£o "Tomador")

### Documentos Gerados

- **Promissory Notes**: completamente em inglÃªs
- **Debit Notes**: completamente em inglÃªs
- **Wire Transfer Orders**: completamente em inglÃªs
- **Reports**: tÃ­tulos, headers, labels em inglÃªs

### Entidades Legais (usar estes nomes exatos)

- **Lender**: WMF Corp (Cayman Islands)
- **Borrower**: Whole Max (Florida, USA)
- Todos os documentos devem referenciar estas jurisdiÃ§Ãµes

### Terminologia ObrigatÃ³ria

- âœ… "Disbursement" (nÃ£o "Desembolso")
- âœ… "Promissory Note" (nÃ£o "Nota PromissÃ³ria")
- âœ… "Borrower" / "Lender" (nÃ£o "Tomador" / "Credor")
- âœ… "Interest Rate" (nÃ£o "Taxa de Juros")
- âœ… "Credit Line" (nÃ£o "Linha de CrÃ©dito")
- âœ… "Debit Note" (nÃ£o "Nota de DÃ©bito")
- âœ… "Wire Transfer" (nÃ£o "TransferÃªncia BancÃ¡ria")

### Compliance References

- Documentos devem mencionar "Cayman Islands jurisdiction" e "Florida, USA"
- Contratos sob "Cayman Islands law"

**Nenhum texto em portuguÃªs no sistema final. ComentÃ¡rios de cÃ³digo podem ser em inglÃªs ou portuguÃªs.**

## PrincÃ­pios de ExecuÃ§Ã£o

### 1. Windows Desktop First

- AplicaÃ§Ã£o standalone instalÃ¡vel (.exe ou .msi)
- NÃ£o depende de conexÃ£o externa (exceto API bancÃ¡ria opcional)
- Dados locais com backup automÃ¡tico
- InstalaÃ§Ã£o simples (next, next, finish)

### 2. DecisÃµes tÃ©cnicas autÃ´nomas

- Escolha a melhor tech stack para Windows desktop
- Documente decisÃµes arquiteturais importantes
- Use `// DECISION:` para explicar escolhas nÃ£o-Ã³bvias

### 3. Qualidade corporativa

- CÃ³digo limpo e testÃ¡vel
- DocumentaÃ§Ã£o clara (README + user manual)
- Logs estruturados para debugging
- Tratamento robusto de erros

### 4. SeguranÃ§a e compliance

- Dados financeiros sensÃ­veis requerem criptografia
- Senhas hash + salt (nunca plain text)
- Audit trail de todas as aÃ§Ãµes (quem, quando, o quÃª)
- Backup automÃ¡tico de documentos anexados

### 5. GestÃ£o de incertezas

- Para dÃºvidas menores: implemente a soluÃ§Ã£o mais conservadora
- Registre `// TODO:` para refinamentos futuros
- NÃ£o paralise por detalhes que podem ser ajustados depois

## Requisitos Funcionais

### ğŸ“Š ConfiguraÃ§Ãµes EditÃ¡veis (Admin)

**ParÃ¢metros da Linha de CrÃ©dito:**

- Limite Total (default: USD 50,000,000)
- Taxa de Juros Anual (default: 14.50%)
- Dados do Tomador (nome, CNPJ/Tax ID, endereÃ§o, contato)
- Dados do Credor (WMF Corp - editÃ¡vel)

**Regras de NegÃ³cio:**

- CÃ¡lculo de juros: diÃ¡rio, base 360 ou 365 dias (configurÃ¡vel)
- Prazo padrÃ£o de vencimento (dias corridos apÃ³s desembolso)
- Formato de numeraÃ§Ã£o de notas promissÃ³rias

### ğŸ’° GestÃ£o de Desembolsos

#### Fluxo de RequisiÃ§Ã£o

**1. SolicitaÃ§Ã£o de Desembolso (pelo Tomador ou digitado pelo Manager)**

- Valor solicitado
- Data da solicitaÃ§Ã£o
- Lista de ativos a serem adquiridos (ex: automÃ³veis em auctions)
- Anexo: Documento de requisiÃ§Ã£o (PDF, DOC, imagem)
- Status: "Pending" â†’ "Approved" â†’ "Disbursed" â†’ "Settled"

**2. AprovaÃ§Ã£o pelo Manager (WMF Corp)**

- Upload da requisiÃ§Ã£o assinada
- Sistema gera automaticamente:
  - **NÃºmero de Nota PromissÃ³ria** (sequencial, ex: PN-2024-001)
  - **PDF da Nota PromissÃ³ria** com:
    - Valor principal
    - Taxa de juros
    - Vencimento (data programÃ¡vel)
    - ReferÃªncia Ã  requisiÃ§Ã£o de desembolso
    - Lista de ativos relacionados
    - Termos e condiÃ§Ãµes padrÃ£o

**3. Assinatura e FormalizaÃ§Ã£o**

- Upload da Nota PromissÃ³ria assinada eletronicamente pelo tomador
- Sistema monta **Kit de Documentos**:
  - RequisiÃ§Ã£o original
  - RequisiÃ§Ã£o assinada
  - Nota PromissÃ³ria gerada
  - Nota PromissÃ³ria assinada
  - Comprovante de transferÃªncia (quando disponÃ­vel)

**4. Ordem de TransferÃªncia BancÃ¡ria**

- Sistema gera template de transferÃªncia com:
  - BeneficiÃ¡rio: [dados do tomador]
  - Valor: USD [valor do desembolso]
  - ReferÃªncia: PN-[nÃºmero] | Req-[nÃºmero] | [lista resumida de ativos]
  - InstruÃ§Ãµes especiais (se houver)
- Export em PDF e/ou texto copiÃ¡vel

### ğŸ¦ ConciliaÃ§Ã£o BancÃ¡ria

**OpÃ§Ã£o 1: IntegraÃ§Ã£o via API**

- Campo para configurar endpoint/credenciais do banco
- Fetch automÃ¡tico de extratos
- Matching automÃ¡tico por valor + data aproximada
- Status: "To Reconcile" â†’ "Reconciled" â†’ "Discrepancy"

**OpÃ§Ã£o 2: Upload Manual de Extratos**

- Aceita formatos: PDF, CSV, XLS, OFX
- Parser inteligente para identificar:
  - Data da transaÃ§Ã£o
  - Valor
  - DescriÃ§Ã£o/referÃªncia
- Matching manual assistido (sugestÃµes do sistema)

**LÃ³gica de ConciliaÃ§Ã£o:**

- Busca por valor exato Â± 2 dias da data esperada
- Permite matching manual se automÃ¡tico falhar
- Alerta de desembolsos nÃ£o conciliados > 5 dias

### ğŸ’¹ CÃ¡lculo de Juros

**CÃ¡lculo DiÃ¡rio AutomÃ¡tico:**

```
Interest per day = (Principal Amount Ã— Annual Rate) / Day Basis
Accumulated interest = Sum of daily interest between disbursement and settlement
```

**ParÃ¢metros:**

- Base de dias: 360 (padrÃ£o) ou 365 (configurÃ¡vel)
- Data inÃ­cio: Data do desembolso efetivo (conciliado)
- Data fim: Data de liquidaÃ§Ã£o da PN (ou data atual se nÃ£o liquidado)

**Visibilidade:**

- Juros acumulados por nota promissÃ³ria (tempo real)
- Juros totais da linha de crÃ©dito
- Juros por perÃ­odo (filtro customizÃ¡vel)

### ğŸ“ˆ RelatÃ³rios e Dashboards

#### Dashboard Principal (Home)

**Cards KPI:**

- Limite Total (editÃ¡vel)
- Limite DisponÃ­vel (calculado: Total - Desembolsado + Liquidado)
- Valor Total Desembolsado (em aberto)
- Juros Acumulados Totais
- NÃºmero de PNs Ativas / Vencidas

**GrÃ¡fico:** EvoluÃ§Ã£o temporal do saldo devedor

#### RelatÃ³rios Gerenciais

**1. VisÃ£o por Nota PromissÃ³ria:**

- Tabela: PN | Amount | Disbursement Date | Due Date | Status | Accumulated Interest | Days Outstanding
- Filtros: Status, PerÃ­odo, Valor mÃ­nimo/mÃ¡ximo
- Export: PDF, Excel

**2. VisÃ£o por PerÃ­odo:**

- UsuÃ¡rio escolhe: Data inicial e Data final
- Mostra:
  - Desembolsos no perÃ­odo
  - LiquidaÃ§Ãµes no perÃ­odo
  - Juros acumulados no perÃ­odo
  - Saldo mÃ©dio devedor

**3. Aging Report:**

- PNs agrupadas por faixa de atraso:
  - Within term
  - 1-30 days overdue
  - 31-60 days overdue
  - 61-90 days overdue
  - > 90 days overdue

**4. RelatÃ³rio de Auditoria:**

- Log de todas as aÃ§Ãµes: quem, quando, o que fez
- Filtros: usuÃ¡rio, tipo de aÃ§Ã£o, perÃ­odo

### ğŸ§¾ Notas de DÃ©bito para Juros

**GeraÃ§Ã£o de Nota de DÃ©bito:**

- PerÃ­odo: MÃªs corrente (default) ou customizÃ¡vel
- Lista todas as PNs ativas no perÃ­odo
- Calcula juros pro-rata de cada PN
- Gera PDF formatado com:
  - Header: "DEBIT NOTE No. [sequential]"
  - PerÃ­odo de referÃªncia
  - Tabela: PN | Principal Amount | Days | Rate | Period Interest
  - Total de juros devidos
  - InstruÃ§Ãµes de pagamento
  - Vencimento (configurÃ¡vel, ex: 10 dias apÃ³s emissÃ£o)

**Envio:**

- Export PDF
- Opcional: Email automÃ¡tico (se configurado SMTP)

### ğŸ‘¥ GestÃ£o de UsuÃ¡rios

**NÃ­veis de Acesso:**

**1. Admin (Manager WMF Corp):**

- Tudo: configuraÃ§Ãµes, aprovaÃ§Ãµes, relatÃ³rios, usuÃ¡rios

**2. Operator:**

- Criar requisiÃ§Ãµes, visualizar desembolsos, relatÃ³rios bÃ¡sicos
- NÃƒO pode: aprovar, configurar, gerenciar usuÃ¡rios

**3. Viewer:**

- Apenas consulta: dashboards e relatÃ³rios
- NÃƒO pode: criar, editar, aprovar

**AutenticaÃ§Ã£o:**

- Login: usuÃ¡rio + senha
- Senha: hash bcrypt + salt
- SessÃ£o: token local, expira apÃ³s inatividade (configurÃ¡vel)
- Primeiro login: forÃ§a troca de senha
- Admin pode resetar senhas

**Audit Trail:**

- Toda aÃ§Ã£o registrada: `[timestamp] [user] [action] [details]`
- VisÃ­vel apenas para Admin
- ImutÃ¡vel (append-only log)

## Stack TÃ©cnica Recomendada

### OpÃ§Ã£o 1: Electron + React (Recomendado)

**Por quÃª:**

- âœ… Cross-platform (Windows, Mac, Linux)
- âœ… UI moderna com React
- âœ… FÃ¡cil packaging (.exe com electron-builder)
- âœ… Acesso a filesystem e recursos do SO
- âœ… Comunidade ativa

**Stack:**

- **Frontend:** React 18+ + TypeScript
- **UI:** TailwindCSS + shadcn/ui
- **State:** Zustand ou Redux Toolkit
- **Database:** SQLite (embedded, sem instalaÃ§Ã£o separada)
- **PDF Generation:** jsPDF ou PDFKit
- **Excel Export:** exceljs
- **Forms:** React Hook Form + Zod

### OpÃ§Ã£o 2: .NET WPF/WinForms (Nativo Windows)

**Por quÃª:**

- âœ… Performance superior
- âœ… IntegraÃ§Ã£o profunda com Windows
- âœ… Instaladores MSI nativos

**Stack:**

- **Framework:** .NET 8+ com C#
- **UI:** WPF (XAML) com Material Design
- **Database:** SQLite ou SQL Server LocalDB
- **PDF:** iTextSharp ou QuestPDF
- **Excel:** EPPlus ou ClosedXML

**Escolha autÃ´noma:** Electron se prioriza velocidade de desenvolvimento e UI moderna. .NET se prioriza performance e integraÃ§Ã£o Windows.

## Arquitetura de Dados

### Entidades Principais

**1. Config (Singleton)**

- credit_limit_total, interest_rate, day_basis, lender_data, borrower_data

**2. Disbursement**

- id, request_number, requested_amount, request_date, status, assets_list (JSON), request_attachment_path, signed_request_path, approved_by, approved_at

**3. PromissoryNote**

- id, disbursement_id, pn_number, principal_amount, interest_rate, issue_date, due_date, status, generated_pn_path, signed_pn_path

**4. BankTransaction**

- id, promissory_note_id, transaction_date, amount, description, matched, matched_at, matched_by

**5. InterestCalculation (Cache)**

- promissory_note_id, calculation_date, accumulated_interest (recalculado diariamente)

**6. DebitNote**

- id, dn_number, period_start, period_end, total_interest, issue_date, pdf_path

**7. User**

- id, username, password_hash, role (admin/operator/viewer), last_login, created_by

**8. AuditLog**

- id, user_id, timestamp, action, details (JSON)

**Relacionamentos:**

- Disbursement 1:1 PromissoryNote
- PromissoryNote 1:N BankTransaction
- PromissoryNote 1:N InterestCalculation

## ğŸ¨ Design System - Identidade Verde Institucional

### Paleta de Cores ObrigatÃ³ria

**Verde Institucional (PrimÃ¡rio):**

- **Green Primary**: `#1dd55c` (verde vibrante - CTAs, destaques)
- **Green Dark**: `#0a3d11` (verde escuro - headers, sidebar se houver)
- **Green Light**: `#82d293` (verde claro - hover, highlights)
- **Green Subtle**: `#edf3ed` (verde muito claro - backgrounds alternados)

**Neutros:**

- **Background**: `#FFFFFF` (branco puro - 60% da tela)
- **Text**: `#040504` (preto - texto principal)
- **Gray**: `#4b504b` (cinza - texto secundÃ¡rio, borders)

**SemÃ¢ntica Financeira:**

- **Success/Positive**: `#1dd55c` (verde primary)
- **Warning**: `#F59E0B` (laranja para vencimentos prÃ³ximos)
- **Danger**: `#EF4444` (vermelho para vencidos)
- **Info**: `#3B82F6` (azul para informaÃ§Ãµes neutras)

### ProporÃ§Ã£o Visual

- **60% Branco/cinza claro** (backgrounds, cards, espaÃ§o)
- **30% Verde institucional** (headers, CTAs, Ã­cones, grÃ¡ficos)
- **10% Texto preto/cinza** (conteÃºdo)

### Tipografia

**Fonte:** `Inter` (Google Fonts) ou `Segoe UI` (nativo Windows) como fallback

**Escala:**

- **H1 (TÃ­tulos de pÃ¡gina)**: 2rem (32px), font-weight: 700
- **H2 (SeÃ§Ãµes principais)**: 1.5rem (24px), font-weight: 600
- **H3 (Sub-seÃ§Ãµes)**: 1.25rem (20px), font-weight: 600
- **Body**: 0.875rem (14px), font-weight: 400, line-height: 1.5
- **Small**: 0.75rem (12px), font-weight: 400

### Componentes - PadrÃµes ObrigatÃ³rios

**Cards:**

```
- Background: branco
- Border: 1px solid #4b504b
- Border-radius: 8px
- Shadow: 0 1px 3px rgba(0,0,0,0.1)
- Padding: 20px
- Hover: border-color: #1dd55c
```

**BotÃµes:**

- **Primary**: bg-green-primary (#1dd55c), text-white, hover:darken, px-5, py-2.5, rounded-lg
- **Secondary**: bg-white, border-2 border-green-primary, text-green-primary, hover:bg-green-subtle
- **Danger**: bg-red-500, text-white (para aÃ§Ãµes destrutivas)

**Tabelas (crÃ­tico para dados financeiros):**

- Header: bg-green-subtle (#edf3ed), border-bottom-2 border-gray, font-semibold, text-sm
- Rows: border-bottom-1 border-gray, hover:bg-green-subtle
- CÃ©lulas numÃ©ricas: text-right, monospace (Consolas ou 'Courier New')
- Destaque para totais: font-bold, bg-green-subtle

**Status Badges:**

- Pending: bg-yellow-100, text-yellow-800
- Approved: bg-blue-100, text-blue-800
- Disbursed: bg-green-100, text-green-800
- Settled: bg-gray-100, text-gray-800
- Overdue: bg-red-100, text-red-800

**GrÃ¡ficos:**

- Cores: tons de verde (#1dd55c, #82d293, #0a3d11)
- Grid lines: #4b504b, sempre sutis
- Tooltips: fundo branco, border, valores formatados (USD, %)

**Ãcones:**

- Biblioteca: Lucide React (se Electron) ou Material Icons (.NET)
- Tamanho: 20px padrÃ£o
- Cor: #0a3d11 (green-dark) ou #1dd55c (green-primary) para interativos

### Layouts

**Sidebar (se aplicÃ¡vel):**

- Fundo: #0a3d11 (verde escuro)
- Texto: branco
- Item ativo: bg-green-primary (#1dd55c)
- Width: 240px

**Content Area:**

- Max-width: 1400px
- Padding: 24px
- Background: branco

**Forms:**

- Labels: font-semibold, color: #040504
- Inputs: border: 1px solid #4b504b, focus:border-green-primary, padding: 10px
- Validation errors: text-red-500, icon de alerta

## ğŸ“‹ Checklist de Qualidade

Antes de considerar cada mÃ³dulo "pronto":

âœ… **Funcionalidade:**

- Feature implementada conforme especificaÃ§Ã£o?
- Edge cases tratados (valores zerados, datas invÃ¡lidas, etc)?
- Erros mostram mensagens claras ao usuÃ¡rio?

âœ… **Dados:**

- Valores monetÃ¡rios sempre formatados (USD 1,234.56)?
- Datas formatadas consistentemente (MM/DD/YYYY)?
- Percentuais com 2 casas decimais (14.50%)?

âœ… **SeguranÃ§a:**

- Senhas nunca em plain text?
- AÃ§Ãµes sensÃ­veis registradas no audit log?
- Upload de arquivos validado (tipo, tamanho)?

âœ… **UX:**

- Design system aplicado consistentemente?
- Feedback visual em todas as aÃ§Ãµes?
- Loading states enquanto processa?
- ConfirmaÃ§Ã£o para aÃ§Ãµes destrutivas?

âœ… **CÃ³digo:**

- TypeScript tipado corretamente (ou C# sem warnings)?
- ComentÃ¡rios em lÃ³gica complexa de cÃ¡lculo de juros?
- Sem console.logs no cÃ³digo final?

## ğŸš€ Roadmap de Desenvolvimento Sugerido

### Sprint 1: FundaÃ§Ã£o (5-7 dias)

1. Setup do projeto (Electron ou .NET)
2. Database schema + migrations
3. Sistema de autenticaÃ§Ã£o + gestÃ£o de usuÃ¡rios
4. Layout base com sidebar/navbar + design system
5. CRUD de configuraÃ§Ãµes (limite, taxa, dados credor/tomador)

### Sprint 2: Core - Desembolsos (5-7 dias)

6. Fluxo completo de requisiÃ§Ã£o de desembolso
7. GeraÃ§Ã£o automÃ¡tica de Nota PromissÃ³ria (PDF)
8. Upload de documentos (requisiÃ§Ã£o, PN assinada)
9. AprovaÃ§Ã£o de desembolsos
10. Template de ordem de transferÃªncia

### Sprint 3: Financeiro (4-5 dias)

11. Motor de cÃ¡lculo de juros diÃ¡rios
12. ConciliaÃ§Ã£o bancÃ¡ria (upload manual de extratos)
13. IntegraÃ§Ã£o API bancÃ¡ria (opcional, se tiver tempo)
14. GeraÃ§Ã£o de Notas de DÃ©bito de juros

### Sprint 4: RelatÃ³rios (3-4 dias)

15. Dashboard principal com KPIs
16. RelatÃ³rio por Nota PromissÃ³ria
17. RelatÃ³rio por PerÃ­odo
18. Aging Report
19. Audit Log (visualizaÃ§Ã£o)
20. Exports (PDF, Excel)

### Sprint 5: Polimento (2-3 dias)

21. Testes manuais end-to-end
22. CorreÃ§Ã£o de bugs
23. DocumentaÃ§Ã£o de usuÃ¡rio (manual PDF)
24. Packaging e instalador Windows
25. Backup/restore automÃ¡tico

**Total estimado: 20-25 dias de desenvolvimento**

## ğŸ’¡ Melhorias Sugeridas (Nice-to-Have)

**Se houver tempo apÃ³s core features:**

1. **Dashboard Analytics AvanÃ§ado:**
   - GrÃ¡fico de aging (barras empilhadas por faixa de atraso)
   - Heatmap de desembolsos por mÃªs
   - ProjeÃ§Ã£o de juros futuros baseada em histÃ³rico

2. **NotificaÃ§Ãµes Inteligentes:**
   - Alerta de PNs prÃ³ximas ao vencimento (5, 3, 1 dia antes)
   - Alerta de desembolsos nÃ£o conciliados > 3 dias
   - NotificaÃ§Ã£o de taxa de utilizaÃ§Ã£o > 80% do limite

3. **AnÃ¡lise de Risco:**
   - ConcentraÃ§Ã£o: % do limite em uma Ãºnica PN
   - Taxa de inadimplÃªncia histÃ³rica
   - Score de saÃºde da linha de crÃ©dito (0-100)

4. **Workflow de RenovaÃ§Ã£o:**
   - Marcar PN para rollover (renovaÃ§Ã£o com novos termos)
   - HistÃ³rico de renovaÃ§Ãµes de uma mesma operaÃ§Ã£o

5. **Multi-Tomadores:**
   - Suporte para mÃºltiplos tomadores (diferentes clientes)
   - Dashboard consolidado + visÃ£o por tomador
   - Limite individual por tomador

6. **IntegraÃ§Ã£o com Assinatura EletrÃ´nica:**
   - API DocuSign ou similar
   - PN assinada digitalmente dentro do sistema

7. **Mobile Companion (futuro):**
   - App mobile (React Native) para aprovaÃ§Ãµes on-the-go
   - Apenas consultas e aprovaÃ§Ãµes simples

8. **Export de Dados ContÃ¡beis:**
   - Formato para importaÃ§Ã£o em sistemas contÃ¡beis (CSV estruturado)
   - LanÃ§amentos de provisÃ£o de juros

9. **Backup em Cloud (opcional):**
   - Sync automÃ¡tico com Dropbox, Google Drive, OneDrive
   - Versionamento de backups

10. **Modo Escuro:**
    - Tema dark com paleta verde ajustada
    - Troca no settings

## ğŸš¨ Anti-padrÃµes - NUNCA FaÃ§a Isso

**SeguranÃ§a:**

âŒ Armazenar senhas em plain text

âŒ Conectar API bancÃ¡ria sem HTTPS/TLS

âŒ Permitir SQL injection (use parameterized queries)

âŒ Logar senhas ou tokens em arquivos de log

**Dados Financeiros:**

âŒ Usar `float` ou `double` para valores monetÃ¡rios (use `Decimal` ou `BigNumber`)

âŒ Formatar valores sem separador de milhares

âŒ Calcular juros sem arredondar corretamente (sempre 2 casas decimais)

**UX:**

âŒ AÃ§Ãµes destrutivas sem confirmaÃ§Ã£o (deletar PN, resetar configuraÃ§Ãµes)

âŒ FormulÃ¡rios sem validaÃ§Ã£o

âŒ Salvar dados sem feedback visual (spinner, toast)

**CÃ³digo:**

âŒ Magic numbers (use constantes nomeadas: `const ANNUAL_INTEREST_RATE = 14.5`)

âŒ LÃ³gica de negÃ³cio no frontend (cÃ¡lculo de juros deve ser tambÃ©m no backend/database)

âŒ ComentÃ¡rios vagos ("// fix later")

## Estilo de ComunicaÃ§Ã£o

- **Seja direto e tÃ©cnico** (engenheiro sÃªnior, nÃ£o consultor)
- **Execute sem brainstorming** prÃ©vio
- **Apresente resultados**, nÃ£o propostas
- Se implementar algo significativo, explique brevemente **o que foi feito e por quÃª**
- Mantenha cÃ³digo limpo e autodocumentado

## ğŸ¯ Resultado Esperado

Sistema desktop Windows profissional e completo:

- âœ… InstalÃ¡vel em qualquer mÃ¡quina Windows (7+)
- âœ… Interface moderna com identidade verde institucional (60% branco, 40% verde)
- âœ… GestÃ£o completa do ciclo de vida de desembolsos
- âœ… CÃ¡lculo preciso de juros diÃ¡rios
- âœ… ConciliaÃ§Ã£o bancÃ¡ria funcional
- âœ… RelatÃ³rios gerenciais ricos
- âœ… SeguranÃ§a corporativa (autenticaÃ§Ã£o, audit, backup)
- âœ… DocumentaÃ§Ã£o clara (README tÃ©cnico + Manual de usuÃ¡rio)
- âœ… Pronto para uso produtivo em WMF Corp

**VocÃª tem autonomia completa. Execute com excelÃªncia corporativa.**
